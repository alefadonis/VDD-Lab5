<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
  <meta charset="utf-8" />
  <style>
    /* Reset básico */
    html,
    body,
    form,
    fieldset,
    table,
    tr,
    td,
    img {
      margin: 0;
      padding: 0;
      font-size: 100%;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Estilos da tabela de cabeçalho */
    table {
      width: 100%;
      margin: 0;
      padding: 0;
      border-spacing: 0;
      background-color: #f8f9fa;
    }

    table td {
      padding: 10px 20px;
      font-size: 0.9em;
      color: #555;
    }

    table tr:first-child td {
      border-bottom: 1px solid #ddd;
    }

    table td:last-child {
      text-align: right;
    }

    /* Cabeçalho do projeto */
    #header h2 {
      text-align: center;
      font-size: 1.8em;
      color: #343a40;
      margin-top: 20px;
    }

    #header h4 {
      text-align: center;
      font-size: 1.2em;
      margin-top: -10px;
      color: #6c757d;
    }

    #header p {
      margin-bottom: 0;
      text-align: center;
      color: #6c757d;
    }

    /* Resumo do projeto */
    #header p.resumo {
      text-align: justify;
      padding: 20px 50px;
      color: #495057;
      line-height: 1.5em;
    }

    /* Conteúdo da visualização */
    #container {
      max-width: 100%;
      height: 470px;
      padding: 20px 50px;
    }

    /* Estilos do rodapé */
    #footer {
      background-color: #f8f9fa;
      padding: 20px 50px;
      font-size: 0.9em;
      color: #6c757d;
    }

    #footer p {
      font-weight: bold;
      margin-bottom: 10px;
    }

    #footer ul {
      list-style-type: disc;
      margin-left: 20px;
      padding-left: 20px;
    }

    #footer ul li {
      margin-bottom: 5px;
    }

    /* Tooltip e interatividade */
    .echarts-tooltip {
      border-radius: 4px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 10px;
      background-color: #fff;
      color: #343a40;
      font-size: 0.9em;
    }

    /* Responsividade */
    @media screen and (max-width: 768px) {
      #container {
        padding: 10px 20px;
      }

      #footer {
        padding: 10px 20px;
      }

      #header p.resumo {
        padding: 10px 20px;
      }
    }
  </style>
</head>

<body style="width: 100%; height: 100%; margin: 0">
  <table style="width: 100%; margin: 0px; padding: 0px; border-width: 0px">
    <tbody>
      <tr height="10px">
        <td>UNIVERSIDADE FEDERAL DE CAMPINA GRANDE - UFCG</td>
        <td style="text-align: right">
          Disciplina: Visualiza&ccedil;&atilde;o de Dados (TECC)
        </td>
      </tr>
      <tr>
        <td>
          CENTRO DE ENGENHARIA EL&Eacute;TRICA E INFORM&Aacute;TICA - CEEI
        </td>
        <td style="text-align: right">
          Professor: Maxwell Guimar&atilde;es de Oliveira
        </td>
      </tr>
      <tr>
        <td>
          UNIDADE ACAD&Ecirc;MICA DE SISTEMAS E COMPUTA&Ccedil;&Atilde;O -
          UASC
        </td>
        <td style="text-align: right">Período: 2023.2</td>
      </tr>
    </tbody>
  </table>
  <div id="header">
    <h2 style="text-align: center">
      Projeto de Visualização Interativa de Dados
    </h2>
    <h4 style="text-align: center">
      <u>Grupo F</u>: Álef Carlos, João Uchôa, José Combé, José Neto, Laysa
      Silva&nbsp; &nbsp;
    </h4>
    <h2 style="text-align: center">
      <span style="
            font-family: 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
          "><strong>Vendas por Categoria de Produto</strong></span>
    </h2>
    <p style="text-align: justify; padding: 10px 50px 10px 50px">
      Visualização das vendas categorizadas e sua evolução ao longo dos anos.
    </p>
  </div>
  <div id="container_pie" style="max-width: 100%; height: 400px; padding: 10px 50px 10px 50px"></div>
  <div id="container_line" style="max-width: 100%; height: 400px; padding: 10px 50px 10px 50px"></div>

  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>

  <script type="text/javascript">
    // Carregar os dados do CSV
    var csvData = `Data,Sales Revenue (USD),Store Location,Product Category
    2022-01-15,200,New York,Electronics
    2022-02-20,150,Los Angeles,Clothing
    2022-03-25,300,Chicago,Furniture
    2023-04-05,400,New York,Electronics
    2023-05-10,250,Los Angeles,Clothing
    2023-06-15,350,Chicago,Furniture`;

    // Parse CSV para obter dados necessários
    function parseCSV(csv) {
      var rows = csv.trim().split("\n").slice(1);
      var data = rows.map((row) => row.split(","));
      var categories = {};
      var yearlySales = {};

      data.forEach((d) => {
        var date = new Date(d[0]);
        var year = date.getFullYear();
        var category = d[3];
        var revenue = parseFloat(d[1]);

        // Acumular vendas por categoria
        if (!categories[category]) {
          categories[category] = 0;
        }
        categories[category] += revenue;

        // Acumular vendas por categoria ao longo dos anos
        if (!yearlySales[year]) {
          yearlySales[year] = {};
        }
        if (!yearlySales[year][category]) {
          yearlySales[year][category] = 0;
        }
        yearlySales[year][category] += revenue;
      });

      return { categories, yearlySales };
    }

    var parsedData = parseCSV(csvData);

    // Configuração do gráfico de pizza
    var pieChart = echarts.init(document.getElementById("container_pie"));
    var pieOption = {
      title: {
        text: "Distribuição de Vendas por Categoria de Produto",
        left: "center",
      },
      tooltip: {
        trigger: "item",
      },
      legend: {
        orient: "vertical",
        left: "left",
      },
      series: [
        {
          name: "Vendas",
          type: "pie",
          radius: "50%",
          data: Object.keys(parsedData.categories).map(function (key) {
            return { name: key, value: parsedData.categories[key] };
          }),
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: "rgba(0, 0, 0, 0.5)",
            },
          },
        },
      ],
    };
    pieChart.setOption(pieOption);

    // Configuração do gráfico de linhas (ou barras) de vendas ao longo dos anos
    var lineChart = echarts.init(document.getElementById("container_line"));
    var years = Object.keys(parsedData.yearlySales);
    var categories = Object.keys(parsedData.categories);

    var seriesData = categories.map((category) => ({
      name: category,
      type: "line",
      data: years.map((year) => parsedData.yearlySales[year][category] || 0),
    }));

    var lineOption = {
      title: {
        text: "Vendas por Categoria ao Longo dos Anos",
        left: "center",
      },
      tooltip: {
        trigger: "axis",
      },
      legend: {
        data: categories,
        top: "bottom",
      },
      xAxis: {
        type: "category",
        data: years,
      },
      yAxis: {
        type: "value",
      },
      series: seriesData,
    };
    lineChart.setOption(lineOption);
  </script>
  <div id="footer">
    <p>Resumo:</p>
    <p class="resumo">
      Essa visualização mostra a distribuição de vendas por categoria de
      produto e a variação ao longo dos anos, permitindo uma análise clara das
      tendências de vendas e do comportamento de diferentes categorias no
      mercado.
    </p>
  </div>
</body>

</html>